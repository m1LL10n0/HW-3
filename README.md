# HW-3
## Aristotle Univerity of Thessaloniki

---
* Εργαστήριο Β Ομαδα 3 - 3η Εργασία

---
| **Ονομα**       | ΑΕΜ          |
| --- | -------------- |
| Αιμίλιος Δραγκίνης | 9364 |
| Χρήστος Παυλίδης | 9480 |

---
## Βήμα 1
**1)**



* **Leakage power** ορίζεται ως η ισχύς που καταναλώνει ένας επεξεργαστής η οποία οφείλεται σε
μικρά ρεύματα διαρροής που ρέουν συνέχεια μέσα σε κάθε τρανζίστορ , καθώς αυτά
βρίσκονται υπό τάση. Τα ρεύματα αυτά οφείλονται στην ατέλεια των τρανζίστορ και η ένταση
τους εξαρτάται από την τιμή της τάσης, τα χαρακτηριστικά και την κατασκευή των τρανζίστορ
αλλά και από την θερμοκρασία. O επεξεργαστής καταναλώνει υποχρεωτικά leakage power για να βρίσκεται σε λειτουργία.Μπορούμε να απαλλαγούμε από την κατανάλωση leakage
ισχύος κάνοντας power gating.

* **Dynamic power** προέρχεται από την λειτουργία των λογικών πυλών ενός επεξεργαστή. Όταν οι
λογικές πύλες εναλλάσσουν την έξοδο τους, ενέργεια καταναλώνεται καθώς η χωρητικότητα
μέσα τος φορτίζεται και αποφορτίζεται. Η Dynamic power είναι ανάλογη της συχνότητας και
του τετράγωνου της τιμής της τάσης. Η τρέχουσα τεχνολογία κατασκευής CMOS υπόσχεται
χαμηλή κατανάλωση ενέργειας.

Δεδομένου ότι η διαφορά από πρόγραμμα σε πρόγραμμα βρίκεται στη χρονική διάρκεια εκτέλεσης και
ότι η ισχύς υπολογίζεται ανά μονάδα χρόνου, καμία κατηγορία ισχύος δεν θα
επηρεαστεί. (θεωρούμε voltage και frequency σταθερές για όλα τα προγράμματα)

**2)**
Η γνώση της ισχύος κάθε επεξεργαστή δεν επαρκεί για να απαντήσουμε ποια επιλογή
επεξεργαστή θα δώσει μεγαλύτερη διάρκεια μπαταρίας, η οποία θα προκύψει από τον
επεξεργαστή με την μικρότερη κατανάλωση ενέργειας και όχι ισχύος. Το χαρακτηριστικό που
μας ενδιαφέρει είναι η τιμή του ορού (CPU performance/watt). To McPat δεν μας βοηθά να
απαντήσουμε καθώς παραλείπει στα αποτελέσματα τις πληροφορίες για το (CPU
performance/watt) και για τη χρονική διάρκεια της προσομοιωμένης διεργασίας

**3)**

Προσμοιώνουμε στον McPat τους Χeon και ΑΡΜ Α9 και βρισκουμε τα παρακατω αποτελέσματα.

| |Xeon      | ARM A9         |
| --- | -------------- |---|
| total leakage | 36.8319W | 0.108687
| runtime dynamic | 72.9199W | 2.96053W

---
Έστω οτι ο Xeon ολοκληρώνει την διεργασία σε a seconds. Τότε ο ARM A9 την ολοκληρώνει σε 40a seconds. Επομένως σε καθε επεξαργαστή καταναλώνεται αντίστοιχα τιμή ενέργειας:


* **Χeon** E1 = 72,9199 * a J
* **ARM A9** E2  = 2.96053 * 40a  = 118.612 * a J

***Βλέπουμε ότι Ε1 < Ε2***

Επομενως κατά την εκτελεση του προγραμματος ο xeon είναι πιο power efficient από τους δυο.
Όμως επειδη δεν διακοπτεται η λειτουργια του συστηματος μετα την ολοκληρωση της εκτέλεσης της εφαρμογής, το πολύ μικρό leakage power του arm a9 σε σχέση με τον Xeon, τον καθιστά εν τελεί πιο
power efficient. Άρα o Xeon δεν μπορεί να είναι πιο energy efficient από τον A9 παρά τη διαφορά στην απόδοση. (θεωρούμε οτι η leakage power ειναι αμελητέα κατα την διάρκεια εκτέλεσης)

---
## Βήμα 2

Στα παρακάτω γραφήματα βλέπουμε το EDP (Energy-Delay-Product) που υπολογίζεται ως το γινόμενο Energy(j) * Delay(s) για τις διάφορες μορφοποιήσεις του συστήματος προσομοίωσής μας που είχαμε κάνει στο δεύτερο εργαστήριο σε λογαριθμική κλίμακα ώστε να φαίνονται όλα στο ίδιο διάγραμμα.
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure1.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure2.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure3.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure4.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure5.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure6.jpg)
![](https://github.com/pavlidic/HW-3/blob/main/figures/Figure7.jpg)
  
  
Επίσης, στα παρακάτω γραφήματα βλέπουμε πως αλλαγές στις παραμέτρους αυτές αλλάζουν τα Area, Runtime Dynamic, Subthreshold Leakage και Gate Leakage.  

![](https://github.com/pavlidic/HW-3/blob/main/graphs/area.png)
![](https://github.com/pavlidic/HW-3/blob/main/graphs/gateL.png)
![](https://github.com/pavlidic/HW-3/blob/main/graphs/subL.png)
![](https://github.com/pavlidic/HW-3/blob/main/graphs/dyn.png)
![](https://github.com/pavlidic/HW-3/blob/main/graphs/pCL2.png)
![](https://github.com/pavlidic/HW-3/blob/main/graphs/pAll.png)

όπου έχουμε:

value/testvar| 1 | 2 | 3
---|---|---|---
cacheline|32b|64b|128b
L1d/i (size)|32kb|64kb|128kb
L2 (size)|512kb|1024kb|4096kb
L1d/i/2 assoc|1|2|4


Από το διάγραμμα αλλαγής του μεγέθους cacheline βγάζουμε το συμπέρασμα ότι μάλλον άξιζαν τελικά οι αλλαγές που προτείναμε στο προηγούμενο εργαστήριο για την βελτιστοποίηση του κόστους\*cpi καθώς βλέπουμε ότι ο χρόνος που κερδίζουμε από τις αλλαγές αυτές είναι τόσο σημαντικός που το EDP κατεβαίνει επίσης σημαντικά παρά το την αύξηση της κατανάλωσης ισχύος. Σχεδόν σε όλες τις άλλες περιπτώσεις όμως βλέπουμε ότι το EDP αυξάνεται με την αύξηση της πολυπλοκότητας του συστήματός μας το οποίο είναι λογικό καθώς δεν είχαμε παρατηρήσει κάποια βελτίωση στους χρόνους των προσομοιώσεων απο το δεύτερο εργαστήριο.



---
Προσομοιωτές επεξεργαστών οπως ο gem5 και ο mcpat, πραγματοποιουν την προσομοιωση με βαση προκαθορισμενες  σχεδιασεις του υλικου (cache, Alu) οι οποιες όμως όσο και να προσπαθούμε να τελειωποιήσουμε, θα διαφέρουν από την ακριβη σχεδιαση του υλικού  που προσομοιωνεται. Επομένως, αν και ποσοτικά η προσέγγιση αυτων των προσομοιωτων ειναι ακριβής, ποιοτικα υπαρχουν σημαντικες αποκλίσεις, δεδομενου οτι οι ακριβείς υλοποιήσεις δεν ειναι παντα διαθεσιμες, γνωστες ή εύκολο να προσομοιωθουν. Το ίδιο συμβαίνει και σε χαμηλότερο επιπεδο , οπου δεν ειναι δυνατη η ακριβής μοντελοποιηση των τρανζιστορ, καθώς οι ιδιότητες τους εξαρτωνται σημαντικα απο κατασκευαστικες παραμέτρους.
Κατά την δημιουργία
των εξομοιωτών γίνονται αρκετές υποθέσεις
και αγνοούνται διάφορα φαινόμενα τα
οποία επίσης είναι δύσκολο ή και αδύνατο να
μοντελοποιηθούν. Εκτός αυτού, το McPAT
συγκεκριμένα για τα αποτελέσματά του
βασίζεται σε στατιστικά τα οποία για
το ίδιο πρόγραμμα και αρχιτεκτονική
μπορεί να διαφέρουν από εξομοιωτή σε
εξομοιωτή. Καθώς βασίζεται σε στατιστικά
καταλαβαίνουμε ότι τα αποτελέσματά του
δεν θα έχουν και μηχανική ακρίβεια.
Επιπλέων, τα αποτελέσματα του McPAT, ακόμη
και στο paper της ανακοίνωσής του, περιέχει
παραγράφους με το όνομα “validation” στα
οποία οι συγγραφείς προσπαθούν να
δείξουν πάλι μέσα από πραγματικά
στατιστικά την ομοιότητα των αποτελεσμάτων
η οποία δεν είναι ποτέ τέλεια. Τέλος,
καθώς κανένα από τα δύο προγράμματα δεν
αναπτύχθηκε αποκλειστικά για την χρήση
με το άλλο και άρα δεν είναι βελτιστοποιημένο
ως προς το τέλειο complatibility μονάχα μεταξύ
των δύο, περιμένουμε πως και αυτό θα μας
δημιουργήσει αρκετά σφάλματα.
